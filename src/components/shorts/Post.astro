---
import type { CollectionEntry } from "astro:content";
import { toReadableString } from "src/utils";
import Icon from "astro-icon";

type Props = { content: CollectionEntry<"shorts"> };

const {
  content: {
    data: { title, url, via, date },
    render,
  },
} = Astro.props;

const { Content } = await render();
---

<div class="card">
  <div class="icon"><Icon pack="fe" name="coffee" /></div>
  <div class="body">
    <div class="info">
      <span class="title">{url ? <a href={url}>{title}</a> : title}</span>
      {
        via ? (
          <span class="via">
            <a href={via}>via</a>
          </span>
        ) : null
      }
      â€¢
      <span class="date">{toReadableString(date)}</span>
    </div>
    <div class="content"><Content /></div>
  </div>

  <style lang="scss">
    @import "/src/variables.scss";

    .card {
      @include sans-serif;
      border-width: 1px;
      border-color: black;
      border-style: solid;

      max-width: 60ch;
      display: flex;
    }

    .body {
      display: flex;
      flex-direction: column;
    }

    .info {
      margin-top: 10px;
      .date {
        @include dimmed;
      }
    }

    [astro-icon] {
      width: 40px;
    }
  </style>
</div>
