---
import Base from "./Base.astro";
import Heading from "../components/blog/post/Heading.astro";
import Tags from "../components/blog/post/Tags.astro";
import type { MarkdownLayoutProps } from "astro";
import Pagination from "../components/blog/post/Pagination.astro";
import PostContent from "src/components/blog/post/PostContent.astro";

type Props = MarkdownLayoutProps<{
  title: string;
  date: string;
  tags: string[];
  description: string;
}>;

const { frontmatter, file, url } = Astro.props;
const basename = file.split("/").pop() || "";
---

<Base
  path={"blog/" + basename}
  back="/blog"
  title={frontmatter.title}
  description={frontmatter.description}
>
  <article>
    <Heading {...Astro.props} url={url} />
    <PostContent>
      <slot />
    </PostContent>
    <Tags tags={frontmatter.tags} />
    <hr />
    <Pagination page={Astro.props} />
  </article>
</Base>

<style lang="scss">
  @import "/src/variables.scss";
  article {
    width: 95%;
    max-width: 75ch;
    padding: 20px;
    @media print {
      width: 100%;
      max-width: 100%;
    }
    // margin: 1rem 2rem;
  }
</style>

<!-- We need global styles here so that the css will
     apply to the generated markdown content inside the slot. -->
